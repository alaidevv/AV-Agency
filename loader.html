<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AV Agency Â· Procesando</title>

<style>
body{
    margin:0;
    background:#000;
    color:#3b82f6;
    font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
    display:flex;
    align-items:center;
    justify-content:center;
    height:100vh;
}
.loader{text-align:center;animation:pulse 1.5s infinite}
@keyframes pulse{
    0%,100%{opacity:.3}
    50%{opacity:1}
}
</style>
</head>

<body>

<div class="loader">
    <h1>Procesando tu solicitud</h1>
    <p>AV Agency</p>
</div>

<script>
const BACKEND_URL = "https://av-agency-backend.up.railway.app/submit";

/* ================= LEER DATOS ================= */
const formData = JSON.parse(localStorage.getItem("av_form_data"));

async function sendToBackend() {
  if (!formData) {
    console.error("No hay datos");
    return;
  }

  try {
    const res = await fetch(BACKEND_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(formData)
    });

    const data = await res.json();
    console.log("RESPUESTA BACKEND:", data);

    localStorage.removeItem("av_form_data");
  } catch (e) {
    console.error("ERROR:", e);
  }
}

sendToBackend();

setTimeout(() => {
  window.location.href = "formulario-completado.html";
}, 2500);
</script>


</body>
</html>
